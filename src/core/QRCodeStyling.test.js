import { QRCodeStyling } from "./QRCodeStyling";

describe("Test QRCodeStyling class", () => {
  beforeAll(() => {
    global.document.body.innerHTML = "<div id='container'></div>";
  });

  it("The README example should work correctly", () => {
    const qrCode = new QRCodeStyling({
      data: "TEST",
      image:
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAEUlEQVR42mNk+M+AARiHsiAAcCIKAYwFoQ8AAAAASUVORK5CYII=",
      dotsOptions: {
        color: "#4267b2",
        type: "rounded"
      },
      backgroundOptions: {
        color: "#e9ebee"
      }
    });
    global.document.body.innerHTML = "<div id='container'></div>";

    const container = global.document.getElementById("container");

    qrCode.append(container);

    return qrCode.serialize().then((encoded) => {
      expect(encoded).toEqual(
        '<?xml version="1.0" standalone="no"?>\r\n<svg xmlns="http://www.w3.org/2000/svg" width="210" height="210" viewBox="0 0 210 210"><defs><clipPath id="clip-path-background-color"><rect x="0" y="0" width="210" height="210" rx="0"/></clipPath><clipPath id="clip-path-dot-color"><path d="M 0 80v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(-90,5,85)"/><path d="M 0 90v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(90,5,95)"/><circle cx="5" cy="115" r="5" transform="rotate(0,5,115)"/><circle cx="15" cy="105" r="5" transform="rotate(0,15,105)"/><circle cx="15" cy="125" r="5" transform="rotate(0,15,125)"/><path d="M 20 90v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,25,95)"/><circle cx="25" cy="115" r="5" transform="rotate(0,25,115)"/><path d="M 30 90v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,35,95)"/><path d="M 30 100v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(90,35,105)"/><path d="M 40 80v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,45,85)"/><path d="M 40 120v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,45,125)"/><rect x="50" y="80" width="10" height="10" transform="rotate(0,55,85)"/><rect x="50" y="90" width="10" height="10" transform="rotate(0,55,95)"/><rect x="50" y="100" width="10" height="10" transform="rotate(0,55,105)"/><rect x="50" y="110" width="10" height="10" transform="rotate(0,55,115)"/><rect x="50" y="120" width="10" height="10" transform="rotate(0,55,125)"/><path d="M 60 80v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,65,85)"/><path d="M 60 100v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,65,105)"/><path d="M 60 120v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,65,125)"/><path d="M 70 110v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,75,115)"/><path d="M 80 10v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,85,15)"/><rect x="80" y="20" width="10" height="10" transform="rotate(0,85,25)"/><rect x="80" y="30" width="10" height="10" transform="rotate(0,85,35)"/><rect x="80" y="40" width="10" height="10" transform="rotate(0,85,45)"/><rect x="80" y="50" width="10" height="10" transform="rotate(0,85,55)"/><rect x="80" y="60" width="10" height="10" transform="rotate(0,85,65)"/><path d="M 80 70v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,85,75)"/><circle cx="85" cy="95" r="5" transform="rotate(0,85,95)"/><path d="M 80 110v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,85,115)"/><path d="M 80 120v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(90,85,125)"/><path d="M 80 150v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(-90,85,155)"/><path d="M 80 160v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(90,85,165)"/><path d="M 80 200v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,85,205)"/><path d="M 90 0v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(-90,95,5)"/><rect x="90" y="10" width="10" height="10" transform="rotate(0,95,15)"/><path d="M 90 20v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,95,25)"/><rect x="90" y="40" width="10" height="10" transform="rotate(0,95,45)"/><rect x="90" y="50" width="10" height="10" transform="rotate(0,95,55)"/><rect x="90" y="70" width="10" height="10" transform="rotate(0,95,75)"/><path d="M 90 130v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(-90,95,135)"/><path d="M 90 140v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,95,145)"/><path d="M 90 190v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,95,195)"/><path d="M 90 200v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,95,205)"/><rect x="100" y="10" width="10" height="10" transform="rotate(0,105,15)"/><path d="M 100 40v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,105,45)"/><rect x="100" y="50" width="10" height="10" transform="rotate(0,105,55)"/><rect x="100" y="60" width="10" height="10" transform="rotate(0,105,65)"/><path d="M 100 70v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,105,75)"/><rect x="100" y="140" width="10" height="10" transform="rotate(0,105,145)"/><path d="M 100 150v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(90,105,155)"/><path d="M 100 190v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,105,195)"/><path d="M 110 10v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,115,15)"/><rect x="110" y="20" width="10" height="10" transform="rotate(0,115,25)"/><path d="M 110 30v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,115,35)"/><circle cx="115" cy="85" r="5" transform="rotate(0,115,85)"/><path d="M 110 120v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,115,125)"/><rect x="110" y="130" width="10" height="10" transform="rotate(0,115,135)"/><path d="M 110 140v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,115,145)"/><path d="M 110 180v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,115,185)"/><circle cx="115" cy="205" r="5" transform="rotate(0,115,205)"/><path d="M 120 30v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,125,35)"/><path d="M 120 60v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(-90,125,65)"/><path d="M 120 70v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(90,125,75)"/><path d="M 120 110v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,125,115)"/><path d="M 120 120v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,125,125)"/><path d="M 120 150v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,125,155)"/><path d="M 120 170v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(-90,125,175)"/><rect x="120" y="180" width="10" height="10" transform="rotate(0,125,185)"/><path d="M 130 80v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,135,85)"/><path d="M 130 90v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,135,95)"/><rect x="130" y="110" width="10" height="10" transform="rotate(0,135,115)"/><path d="M 130 150v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,135,155)"/><path d="M 130 180v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,135,185)"/><path d="M 130 190v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,135,195)"/><rect x="140" y="80" width="10" height="10" transform="rotate(0,145,85)"/><rect x="140" y="90" width="10" height="10" transform="rotate(0,145,95)"/><path d="M 140 110v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,145,115)"/><circle cx="145" cy="135" r="5" transform="rotate(0,145,135)"/><path d="M 140 160v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,145,165)"/><path d="M 140 190v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,145,195)"/><rect x="150" y="80" width="10" height="10" transform="rotate(0,155,85)"/><rect x="150" y="90" width="10" height="10" transform="rotate(0,155,95)"/><circle cx="155" cy="125" r="5" transform="rotate(0,155,125)"/><path d="M 150 150v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(-90,155,155)"/><rect x="150" y="160" width="10" height="10" transform="rotate(0,155,165)"/><path d="M 150 180v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,155,185)"/><circle cx="155" cy="205" r="5" transform="rotate(0,155,205)"/><rect x="160" y="80" width="10" height="10" transform="rotate(0,165,85)"/><rect x="160" y="90" width="10" height="10" transform="rotate(0,165,95)"/><path d="M 160 100v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,165,105)"/><path d="M 160 130v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(180,165,135)"/><path d="M 160 160v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,165,165)"/><path d="M 160 180v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,165,185)"/><rect x="170" y="80" width="10" height="10" transform="rotate(0,175,85)"/><rect x="170" y="100" width="10" height="10" transform="rotate(0,175,105)"/><rect x="170" y="110" width="10" height="10" transform="rotate(0,175,115)"/><rect x="170" y="120" width="10" height="10" transform="rotate(0,175,125)"/><rect x="170" y="130" width="10" height="10" transform="rotate(0,175,135)"/><path d="M 170 140v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,175,145)"/><circle cx="175" cy="175" r="5" transform="rotate(0,175,175)"/><rect x="180" y="80" width="10" height="10" transform="rotate(0,185,85)"/><rect x="180" y="90" width="10" height="10" transform="rotate(0,185,95)"/><path d="M 180 100v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,185,105)"/><rect x="180" y="120" width="10" height="10" transform="rotate(0,185,125)"/><rect x="180" y="140" width="10" height="10" transform="rotate(0,185,145)"/><path d="M 180 150v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(90,185,155)"/><path d="M 190 80v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,195,85)"/><path d="M 190 90v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,195,95)"/><path d="M 190 110v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(-90,195,115)"/><rect x="190" y="120" width="10" height="10" transform="rotate(0,195,125)"/><rect x="190" y="130" width="10" height="10" transform="rotate(0,195,135)"/><path d="M 190 140v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,195,145)"/><circle cx="195" cy="175" r="5" transform="rotate(0,195,175)"/><circle cx="195" cy="205" r="5" transform="rotate(0,195,205)"/><circle cx="205" cy="105" r="5" transform="rotate(0,205,105)"/><path d="M 200 120v 10h 5a 5 5, 0, 0, 0, 0 -10" transform="rotate(0,205,125)"/><circle cx="205" cy="155" r="5" transform="rotate(0,205,155)"/><circle cx="205" cy="185" r="5" transform="rotate(0,205,185)"/><path d="M 0 0v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,5,5)"/><rect x="0" y="10" width="10" height="10" transform="rotate(0,5,15)"/><rect x="0" y="20" width="10" height="10" transform="rotate(0,5,25)"/><rect x="0" y="30" width="10" height="10" transform="rotate(0,5,35)"/><rect x="0" y="40" width="10" height="10" transform="rotate(0,5,45)"/><rect x="0" y="50" width="10" height="10" transform="rotate(0,5,55)"/><path d="M 0 60v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,5,65)"/><rect x="10" y="0" width="10" height="10" transform="rotate(0,15,5)"/><rect x="10" y="60" width="10" height="10" transform="rotate(0,15,65)"/><rect x="20" y="0" width="10" height="10" transform="rotate(0,25,5)"/><rect x="20" y="60" width="10" height="10" transform="rotate(0,25,65)"/><rect x="30" y="0" width="10" height="10" transform="rotate(0,35,5)"/><rect x="30" y="60" width="10" height="10" transform="rotate(0,35,65)"/><rect x="40" y="0" width="10" height="10" transform="rotate(0,45,5)"/><rect x="40" y="60" width="10" height="10" transform="rotate(0,45,65)"/><rect x="50" y="0" width="10" height="10" transform="rotate(0,55,5)"/><rect x="50" y="60" width="10" height="10" transform="rotate(0,55,65)"/><path d="M 60 0v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,65,5)"/><rect x="60" y="10" width="10" height="10" transform="rotate(0,65,15)"/><rect x="60" y="20" width="10" height="10" transform="rotate(0,65,25)"/><rect x="60" y="30" width="10" height="10" transform="rotate(0,65,35)"/><rect x="60" y="40" width="10" height="10" transform="rotate(0,65,45)"/><rect x="60" y="50" width="10" height="10" transform="rotate(0,65,55)"/><path d="M 60 60v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,65,65)"/><path d="M 20 20v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,25,25)"/><rect x="20" y="30" width="10" height="10" transform="rotate(0,25,35)"/><path d="M 20 40v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,25,45)"/><rect x="30" y="20" width="10" height="10" transform="rotate(0,35,25)"/><rect x="30" y="30" width="10" height="10" transform="rotate(0,35,35)"/><rect x="30" y="40" width="10" height="10" transform="rotate(0,35,45)"/><path d="M 40 20v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,45,25)"/><rect x="40" y="30" width="10" height="10" transform="rotate(0,45,35)"/><path d="M 40 40v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,45,45)"/><path d="M 140 0v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,145,5)"/><rect x="140" y="10" width="10" height="10" transform="rotate(0,145,15)"/><rect x="140" y="20" width="10" height="10" transform="rotate(0,145,25)"/><rect x="140" y="30" width="10" height="10" transform="rotate(0,145,35)"/><rect x="140" y="40" width="10" height="10" transform="rotate(0,145,45)"/><rect x="140" y="50" width="10" height="10" transform="rotate(0,145,55)"/><path d="M 140 60v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,145,65)"/><rect x="150" y="0" width="10" height="10" transform="rotate(0,155,5)"/><rect x="150" y="60" width="10" height="10" transform="rotate(0,155,65)"/><rect x="160" y="0" width="10" height="10" transform="rotate(0,165,5)"/><rect x="160" y="60" width="10" height="10" transform="rotate(0,165,65)"/><rect x="170" y="0" width="10" height="10" transform="rotate(0,175,5)"/><rect x="170" y="60" width="10" height="10" transform="rotate(0,175,65)"/><rect x="180" y="0" width="10" height="10" transform="rotate(0,185,5)"/><rect x="180" y="60" width="10" height="10" transform="rotate(0,185,65)"/><rect x="190" y="0" width="10" height="10" transform="rotate(0,195,5)"/><rect x="190" y="60" width="10" height="10" transform="rotate(0,195,65)"/><path d="M 200 0v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,205,5)"/><rect x="200" y="10" width="10" height="10" transform="rotate(0,205,15)"/><rect x="200" y="20" width="10" height="10" transform="rotate(0,205,25)"/><rect x="200" y="30" width="10" height="10" transform="rotate(0,205,35)"/><rect x="200" y="40" width="10" height="10" transform="rotate(0,205,45)"/><rect x="200" y="50" width="10" height="10" transform="rotate(0,205,55)"/><path d="M 200 60v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,205,65)"/><path d="M 160 20v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,165,25)"/><rect x="160" y="30" width="10" height="10" transform="rotate(0,165,35)"/><path d="M 160 40v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,165,45)"/><rect x="170" y="20" width="10" height="10" transform="rotate(0,175,25)"/><rect x="170" y="30" width="10" height="10" transform="rotate(0,175,35)"/><rect x="170" y="40" width="10" height="10" transform="rotate(0,175,45)"/><path d="M 180 20v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,185,25)"/><rect x="180" y="30" width="10" height="10" transform="rotate(0,185,35)"/><path d="M 180 40v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,185,45)"/><path d="M 0 140v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,5,145)"/><rect x="0" y="150" width="10" height="10" transform="rotate(0,5,155)"/><rect x="0" y="160" width="10" height="10" transform="rotate(0,5,165)"/><rect x="0" y="170" width="10" height="10" transform="rotate(0,5,175)"/><rect x="0" y="180" width="10" height="10" transform="rotate(0,5,185)"/><rect x="0" y="190" width="10" height="10" transform="rotate(0,5,195)"/><path d="M 0 200v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,5,205)"/><rect x="10" y="140" width="10" height="10" transform="rotate(0,15,145)"/><rect x="10" y="200" width="10" height="10" transform="rotate(0,15,205)"/><rect x="20" y="140" width="10" height="10" transform="rotate(0,25,145)"/><rect x="20" y="200" width="10" height="10" transform="rotate(0,25,205)"/><rect x="30" y="140" width="10" height="10" transform="rotate(0,35,145)"/><rect x="30" y="200" width="10" height="10" transform="rotate(0,35,205)"/><rect x="40" y="140" width="10" height="10" transform="rotate(0,45,145)"/><rect x="40" y="200" width="10" height="10" transform="rotate(0,45,205)"/><rect x="50" y="140" width="10" height="10" transform="rotate(0,55,145)"/><rect x="50" y="200" width="10" height="10" transform="rotate(0,55,205)"/><path d="M 60 140v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,65,145)"/><rect x="60" y="150" width="10" height="10" transform="rotate(0,65,155)"/><rect x="60" y="160" width="10" height="10" transform="rotate(0,65,165)"/><rect x="60" y="170" width="10" height="10" transform="rotate(0,65,175)"/><rect x="60" y="180" width="10" height="10" transform="rotate(0,65,185)"/><rect x="60" y="190" width="10" height="10" transform="rotate(0,65,195)"/><path d="M 60 200v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,65,205)"/><path d="M 20 160v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(-90,25,165)"/><rect x="20" y="170" width="10" height="10" transform="rotate(0,25,175)"/><path d="M 20 180v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(180,25,185)"/><rect x="30" y="160" width="10" height="10" transform="rotate(0,35,165)"/><rect x="30" y="170" width="10" height="10" transform="rotate(0,35,175)"/><rect x="30" y="180" width="10" height="10" transform="rotate(0,35,185)"/><path d="M 40 160v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(0,45,165)"/><rect x="40" y="170" width="10" height="10" transform="rotate(0,45,175)"/><path d="M 40 180v 10h 10v -5a 5 5, 0, 0, 0, -5 -5" transform="rotate(90,45,185)"/></clipPath></defs><rect x="0" y="0" height="210" width="210" clip-path="url(\'#clip-path-background-color\')" fill="#e9ebee"/><rect x="0" y="0" height="210" width="210" clip-path="url(\'#clip-path-dot-color\')" fill="#4267b2"/><image href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAEUlEQVR42mNk+M+AARiHsiAAcCIKAYwFoQ8AAAAASUVORK5CYII=" x="90" y="90" width="30px" height="30px"/></svg>'
      );
    });
  });
});
